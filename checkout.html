<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Checkout - Delicious Dine</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Raleway:wght@400;500;600&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Raleway', sans-serif;
  background-color: #000;
  color: #fff;
  min-height: 100vh;
}
.navbar {
  background: rgba(0,0,0,0.85);
  backdrop-filter: blur(8px);
  box-shadow: 0 0 15px rgba(248,211,79,0.2);
}
.navbar-brand {
  font-family: 'Playfair Display', serif;
  font-weight:700;
  font-size:1.8rem;
  background: linear-gradient(45deg,#f8d34f,#ff6f61,#6a0dad);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 10px rgba(248,211,79,0.7);
}
.navbar .btn-outline-light { color:#f8d34f; border-color:#f8d34f; font-weight:600; transition:0.3s;}
.navbar .btn-outline-light:hover { background: linear-gradient(45deg,#f8d34f,#ff6f61); color:#000; border-color:transparent; box-shadow:0 0 10px rgba(255,215,0,0.6); }

h2 {
  font-family: 'Playfair Display', serif;
  font-weight:700;
  font-size:2rem;
  text-align:center;
  background: linear-gradient(45deg,#f8d34f,#ff6f61);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  text-shadow:0 0 15px rgba(248,211,79,0.6);
  margin-bottom:25px;
}
.list-group-item {
  background: linear-gradient(160deg,#1b1b1b,#2a2a2a);
  color:#fff; border-radius:15px; margin-bottom:10px;
  display:flex; justify-content:space-between; align-items:center;
  padding:15px; box-shadow:0 0 12px rgba(248,211,79,0.1);
}
.list-group-item img {
  width:60px; height:60px; border-radius:12px; margin-right:15px;
  object-fit:cover; border:2px solid #f8d34f;
}
.total-box {
  background: linear-gradient(160deg,#1b1b1b,#2a2a2a);
  padding:15px; border-radius:15px; margin-top:15px;
  box-shadow:0 0 12px rgba(248,211,79,0.1);
}
.total-box h5 { color:#f8d34f; font-family:'Playfair Display',serif; }
.payment-option { margin:10px 0; display:flex; align-items:center; }
.payment-option input[type="radio"] { margin-right:10px; transform:scale(1.2); }
.payment-option label { color:#f8d34f; font-weight:500; cursor:pointer; }
.btn-primary {
  background: linear-gradient(90deg,#f8d34f,#ff7f50);
  border:none; color:#000; font-weight:600; padding:12px 25px;
  border-radius:12px; transition:0.3s;
}
.btn-primary:hover { background: linear-gradient(90deg,#ff7f50,#f8d34f); transform:translateY(-2px); }
.modal-content {
  background:#1b1b1b; color:#fff; border-radius:12px; box-shadow:0 0 10px rgba(248,211,79,0.4);
}
.modal-header { border-bottom:1px solid #f8d34f; }
.modal-footer { border-top:1px solid #f8d34f; }
.order-confirmation {
  animation: bounceFade 1s ease forwards;
}
@keyframes bounceFade {
  0% {opacity:0; transform:scale(0.5);}
  50% {opacity:1; transform:scale(1.2);}
  100% {transform:scale(1);}
}
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
  <div class="container">
    <a class="navbar-brand" href="index.html">üçΩ Delicious Bites</a>
    <div>
      <a class="btn btn-sm btn-outline-light me-2" href="index.html">Home</a>
      <a class="btn btn-sm btn-outline-light me-2" href="menu.html">Menu</a>
      <span id="navbar-table" class="btn btn-sm btn-outline-light">Table: N/A</span>
    </div>
  </div>
</nav>

<br><br>
<div class="container py-5" style="padding-top:120px;">
  <h2>Checkout</h2>

  <!-- Order Mode -->
  <div class="total-box mb-4">
    <h5>üõé Order Type</h5>
    <div class="form-check">
      <input class="form-check-input" type="radio" name="orderMode" id="delivery" value="Delivery" checked>
      <label class="form-check-label" for="delivery">Home Delivery</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="radio" name="orderMode" id="dinein" value="DineIn">
      <label class="form-check-label" for="dinein">Dine-In</label>
    </div>
  </div>

  <!-- Delivery Info -->
  <div id="delivery-info" class="total-box mb-4">
    <h5>üì¶ Delivery Details</h5>
    <input type="text" id="name" class="form-control mb-2" placeholder="Full Name">
    <input type="text" id="address" class="form-control mb-2" placeholder="Full Address">
    <input type="tel" id="phone" class="form-control mb-2" placeholder="Phone Number">
  </div>

  <!-- Cart Items -->
  <div id="checkout-area"></div>

  <!-- Payment -->
  <div class="total-box mt-4 text-start">
    <h5>üí≥ Payment Method</h5>
    <div class="form-check">
      <input class="form-check-input" type="radio" name="paymentMethod" id="cod" value="COD" checked>
      <label class="form-check-label" for="cod">Cash on Delivery (COD)</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="radio" name="paymentMethod" id="upi" value="UPI">
      <label class="form-check-label" for="upi">UPI Payment</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="radio" name="paymentMethod" id="card" value="Card">
      <label class="form-check-label" for="card">Card Payment</label>
    </div>
  </div>

  <div class="text-center mt-4">
    <button id="place-order" class="btn btn-primary">Place Order</button>
  </div>
</div>

<!-- Payment Modal -->
<div class="modal fade" id="paymentModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Payment Details</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" id="paymentFields"></div>
      <div class="modal-footer">
        <button class="btn btn-primary" id="pay-now">Pay Now</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
(function(){
  const cart = JSON.parse(localStorage.getItem('rb_cart') || '[]');
  const area = document.getElementById('checkout-area');
  const paymentModal = new bootstrap.Modal(document.getElementById('paymentModal'));
  let total = 0;
  let selectedPayment = "";
  let orderType = "Delivery";

  // Render cart
  if(cart.length===0){
    area.innerHTML='<div class="alert alert-warning text-dark">Your cart is empty.</div>';
    document.getElementById('place-order').style.display="none";
  } else {
    let html='<ul class="list-group">';
    cart.forEach(c=>{
      total += c.price*c.qty;
      html+=`
      <li class="list-group-item">
        <div class="d-flex align-items-center">
          <img src="${c.img}" alt="${c.title}">
          <div><strong>${c.title}</strong><br>‚Çπ${c.price} √ó ${c.qty} = ‚Çπ${(c.price*c.qty).toFixed(2)}</div>
        </div>
      </li>`;
    });
    html+='</ul>';
    html+=`<div class="total-box mt-3"><strong>Total Amount: ‚Çπ${total.toFixed(2)}</strong></div>`;
    area.innerHTML=html;
  }

  // Toggle Delivery Info
  document.querySelectorAll('input[name="orderMode"]').forEach(r=>{
    r.addEventListener('change',()=>{
      orderType=r.value;
      document.getElementById('delivery-info').style.display = (r.value==='Delivery') ? 'block':'none';
    });
  });

  // Payment button
  document.getElementById('place-order').addEventListener('click',()=>{
    selectedPayment=document.querySelector('input[name="paymentMethod"]:checked').value;
    if(orderType==='Delivery'){
      const name=document.getElementById('name').value.trim();
      const addr=document.getElementById('address').value.trim();
      const phone=document.getElementById('phone').value.trim();
      if(!name||!addr||!phone){ alert("Please fill all delivery details."); return; }
    }

    if(selectedPayment==="UPI" || selectedPayment==="Card"){
      showPaymentForm(selectedPayment);
    } else {
      showConfirmation();
    }
  });

  // Show payment form
  function showPaymentForm(type){
    const container=document.getElementById('paymentFields');
    if(type==="UPI"){
      container.innerHTML=`
        <label>Enter UPI ID</label>
        <input type="text" id="upiId" class="form-control mb-2" placeholder="example@upi">
      `;
    } else {
      container.innerHTML=`
        <label>Card Number</label>
        <input type="text" id="cardNum" class="form-control mb-2" placeholder="1234 5678 9012 3456">
        <label>Expiry (MM/YY)</label>
        <input type="text" id="expiry" class="form-control mb-2" placeholder="MM/YY">
        <label>CVV</label>
        <input type="password" id="cvv" maxlength="3" class="form-control" placeholder="123">
      `;
    }
    paymentModal.show();
  }

  document.getElementById('pay-now').addEventListener('click',()=>{
    if(selectedPayment==="UPI"){
      const id=document.getElementById('upiId').value.trim();
      if(!id.includes("@")) return alert("Enter valid UPI ID!");
    } else {
      const c=document.getElementById('cardNum').value.trim();
      const e=document.getElementById('expiry').value.trim();
      const cv=document.getElementById('cvv').value.trim();
      if(!c||!e||!cv) return alert("Please fill card details!");
    }
    paymentModal.hide();
    setTimeout(()=>{ alert("‚úÖ Payment Successful!"); showConfirmation(); },400);
  });

  // Confirmation
  function showConfirmation(){
    document.querySelector('.container').innerHTML=`
      <div class="text-center py-5 order-confirmation">
        <h2 style="color:#f8d34f;">‚úÖ Payment Successful!</h2>
        <p style="font-size:1.1rem;">Your ${orderType==='Delivery'?'order will be delivered soon!':'order is being prepared!'} </p>
        <a href="index.html" class="btn btn-primary mt-3">Back to Home</a>
      </div>`;
    localStorage.removeItem('rb_cart');
  }

})();
</script>
</body>
</html>
